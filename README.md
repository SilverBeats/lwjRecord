## 组件说明

### 1、实现的功能

1. 录音，可以录制多条录音并通过scroll-view展示
2. 开始录音，暂停录音，继续录音，结束录音
3. 播放录音，暂停播放，继续播放，停止播放
4. 显示录音录制的时间
5. 在播放录音时，可以显示录音时长倒计时，告知用户录音还有多长时间结束
6. 结束录音时，会有弹窗让用户定义录音名字（这个弹窗用的是别人的组件叫zz-prompt）
7. 录制的音频格式为 aac，可选值 aac或者mp3 

### 2、适用的平台说明

每个平台怎么样就不测了，就把组件中用到的一些有平台差异的方法都列了出来，就当适用平台说明吧

写这个组件目的是用在App端，所以用于App肯定是没问题的，测了很多次

|                               | APP  | H5   | 微信小程序 | 支付宝小程序 | 百度小程序 | 头条小程序 | QQ小程序 |
| ----------------------------- | ---- | ---- | ---------- | ------------ | ---------- | ---------- | -------- |
| uni.getRecorderManager()      | √    |      | √          |              | √          | √          | √        |
| uni.createInnerAudioContext() | √    | √    | √          |              | √          | √          | √        |

### 3、zz-prompt说明

用这个弹窗组件做了一点修改，修改内容不多，如下：

```vue
<script>
	export default {
        methods: {
            // 只修改了close方法
            close() {
				this.$emit('cancel');
			}
        }
    }
</script>
```

### 4、使用示例

```vue
<templete>
    <!-- 要是不喜欢默认值的话…… -->
    <lwj-record 
    	:recordTime= 600 
        :popupPlaceholder="请输入名字" 
        :popupTitle="命名">
    </lwj-record>
    
    <!-- 要是喜欢默认值的话…… -->
    <lwj-record></lwj-record>
</templete>

<script>
    import lwjRecord from "@/components/lwj-record/lwj-record.vue";
    export default {
        components: {
            lwjRecord
        }
    }
</script>
```

### 5、属性说明

| 属性名           | 类型   | 默认值               | 说明                                                         |
| ---------------- | ------ | -------------------- | ------------------------------------------------------------ |
| recordTime       | Number | 600s                 | 录音的时长，单位s，这个值会传到recorderManager.start()方法中的duration属性，官方文档说是最大值 600000（600秒，10 分钟），所以在使用时最好不要超过这个最大值 |
| popupPlaceholder | String | 请主人赐名           | 弹窗的输入框的Placeholder                                    |
| popupTitle       | String | 给这条录音起个名字吧 | 弹窗的title                                                  |
| recordPathList   | Array  | 空                   | 可以将已有的录音列表传入                                     |

| 事件         | 说明                                                         |
| ------------ | ------------------------------------------------------------ |
| @closeRecord | 当组件关闭时触发，返回录音列表数组，每个数组元素都是对象，对象格式为{name:"用户定义的录音名字",voicePath:"录音文件的路径", time: 录音时长} |

### 6、考虑到的情况

| 可能的出现的情况                                             | 是否解决 | 解决方案                                                     |
| ------------------------------------------------------------ | -------- | ------------------------------------------------------------ |
| 用户在命名时，会出现重复                                     | 已解决   | 禁止重复命名，提示用户重新命名                               |
| 用户在未录音状态下，疯狂点击停止录音                         | 已解决   | 非录音状态下，不会执行stopRecord方法中的后续代码             |
| 用户在暂停录音状态时，点击停止录音                           | 已解决   | 结束录音，弹出框显示，告知用户命名                           |
| 用户在录音时，误触mask区域，触发关闭组件事件                 | 已解决   | 用户在录音时触碰mask区域不会令组件消失                       |
| 用户在录音时，切换到播放录音按钮界面后，存在正在录音，却又点击播放录音按钮的可能性 | 已解决   | 录音时，倘若滑动，会结束录音，并让用户给录音定义名称         |
|                                                              |          |                                                              |
| 用户在播放录音时，切换到录音按钮界面后，存在正在播放录音，却又点击录音按钮的可能性 | 已解决   | 播放录音时，倘若滑动会结束当前录音播放（结束播放后可能会出现显示时间的错误） |
| 用户未选中要播放的录音选项，并且疯狂点击播放录音             | 已解决   | 提示用户：当前播放路径无效                                   |
| 用户未选中要播放的录音选项，并且疯狂点击暂停播放             | 已解决   | 提示用户：无效操作                                           |
| 用户未选中要播放的录音选项，并且疯狂点击停止播放             | 已解决   | 提示用户：无效操作                                           |
| 用户在播放录音时，误触mask区域，触发关闭组件事件             | 已解决   | 用户在播放录音时触碰mask区域不会令组件消失                   |
| 用户在录音界面选中了多个选项，并进行滑块的移动，切换到播放界面，并且点击播放 | 已解决   | 只会播放最上面选中的选项录音<br>提示用户：有多个选中项，只播放最上面一条 |

